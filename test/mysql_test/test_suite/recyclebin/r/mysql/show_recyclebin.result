show recyclebin的测试
show recyclebin只能看到当前库下面的回收站对象

--------------------------------------------------------------------
一，sys租户 root用户
创建三个库，每个库中创建一个表，然后放入回收站当中，在每个库中使用show recyclebin
发现只有一个对象，看不到其它库的回收站对象
--------------------------------------------------------------------
connect  obsys,$OBMYSQL_MS0,admin,$OBMYSQL_PWD,*NO-ONE*,$OBMYSQL_PORT;
connection obsys;
set recyclebin=on;
create database recyclebin_db1;
use recyclebin_db1;
create table t1(c1 int);
drop table t1;
获取show recyclebin结果的第一行的ORIGINAL_NAME列数据
获取show recyclebin结果的第二行的ORIGINAL_NAME列数据
row1 ORIGINAL_NAME: t1
第二行没有数据，因为show recyclebin只有一行数据
row2 ORIGINAL_NAME: No such row

create database recyclebin_db2;
use recyclebin_db2;
create table t1(c1 int,c2 int);
drop table t1;
row1 ORIGINAL_NAME: t1
第二行没有数据，因为show recyclebin显示的只有一行数据，只能看到当前数据库的recyclebin对象
row2 ORIGINAL_NAME: No such row

create database recyclebin_db3;
use recyclebin_db3;
create table t1(c1 int,c2 int);
drop table t1;
row1 ORIGINAL_NAME: t1
第二行没有数据，因为show recyclebin显示的只有一行数据，只能看到当前数据库的recyclebin对象
row2 ORIGINAL_NAME: No such row

--------------------------------------------------------------------
二，sys租户 普通用户
一共有三个库，属于每个库的回收站对象只有一个，在每个库中使用show recyclebin
发现只有一个对象，看不到其它库的回收站对象
--------------------------------------------------------------------
CREATE USER 'weihan'@'%' IDENTIFIED BY 'weihan';
grant all on recyclebin_db1.* to weihan@'%'  identified by "weihan";
grant all on recyclebin_db2.* to weihan@'%'  identified by "weihan";
grant all on recyclebin_db3.* to weihan@'%'  identified by "weihan";
disconnect obsys;
connect  obsys_weihan,$OBMYSQL_MS0,weihan@sys,weihan,*NO-ONE*,$OBMYSQL_PORT;
connection obsys_weihan;

use recyclebin_db1;
row1 ORIGINAL_NAME: t1
只能看到一行数据
row2 ORIGINAL_NAME: No such row

use recyclebin_db1;
row1 ORIGINAL_NAME: t1
只能看到一行数据
row2 ORIGINAL_NAME: No such row

use recyclebin_db1;
row1 ORIGINAL_NAME: t1
只能看到一行数据
row2 ORIGINAL_NAME: No such row

--------------------------------------------------------------------
清理
--------------------------------------------------------------------
disconnect obsys_weihan;
connect  obsys,$OBMYSQL_MS0,admin,$OBMYSQL_PWD,*NO-ONE*,$OBMYSQL_PORT;
connection obsys;
use test;
drop database recyclebin_db1;
drop database recyclebin_db2;
drop database recyclebin_db3;
有6条记录，其中三个表对象，三个数据库对象
select count(*) from oceanbase.__all_recyclebin;
count(*)
6
use __recyclebin;
purge recyclebin;

--------------------------------------------------------------------
三，普通租户 root用户
创建三个库，每个库中创建一个表，然后放入回收站当中，在每个库中使用show recyclebin
发现只有一个对象，看不到其它库的回收站对象
--------------------------------------------------------------------
create resource unit if not exists recyclebin_unit max_cpu=1, min_memory='1G',max_memory='1G',max_disk_size='1G',max_iops=1000,max_session_num=1000;
create resource pool if not exists recyclebin_pool unit='recyclebin_unit', unit_num=1;
create tenant if not exists recyclebin_tenant RESOURCE_POOL_LIST=('recyclebin_pool') set ob_tcp_invited_nodes='%';
disconnect obsys;
connect  comm_root,$OBMYSQL_MS0,root@recyclebin_tenant,,*NO-ONE*,$OBMYSQL_PORT;
connection comm_root;
set recyclebin=on;

create database recyclebin_db1;
use recyclebin_db1;
create table t1(c1 int);
drop table t1;
获取show recyclebin结果的第一行的ORIGINAL_NAME列数据
获取show recyclebin结果的第二行的ORIGINAL_NAME列数据
row1 ORIGINAL_NAME: t1
第二行没有数据，因为show recyclebin只有一行数据
row2 ORIGINAL_NAME: No such row

create database recyclebin_db2;
use recyclebin_db2;
create table t1(c1 int,c2 int);
drop table t1;
row1 ORIGINAL_NAME: t1
第二行没有数据，因为show recyclebin显示的只有一行数据，只能看到当前数据库的recyclebin对象
row2 ORIGINAL_NAME: No such row

create database recyclebin_db3;
use recyclebin_db3;
create table t1(c1 int,c2 int);
drop table t1;
row1 ORIGINAL_NAME: t1
第二行没有数据，因为show recyclebin显示的只有一行数据，只能看到当前数据库的recyclebin对象
row2 ORIGINAL_NAME: No such row

--------------------------------------------------------------------
四，普通租户 普通用户
一共有三个库，属于每个库的回收站对象只有一个，在每个库中使用show recyclebin
发现只有一个对象，看不到其它库的回收站对象
--------------------------------------------------------------------
CREATE USER 'weihan'@'%' IDENTIFIED BY 'weihan';
grant all on recyclebin_db1.* to weihan@'%'  identified by "weihan";
grant all on recyclebin_db2.* to weihan@'%'  identified by "weihan";
grant all on recyclebin_db3.* to weihan@'%'  identified by "weihan";
disconnect comm_root;
connect  comm_weihan,$OBMYSQL_MS0,weihan@recyclebin_tenant,weihan,*NO-ONE*,$OBMYSQL_PORT;
connection comm_weihan;

use recyclebin_db1;
row1 ORIGINAL_NAME: t1
row2 ORIGINAL_NAME: No such row

use recyclebin_db1;
row1 ORIGINAL_NAME: t1
row2 ORIGINAL_NAME: No such row

use recyclebin_db1;
row1 ORIGINAL_NAME: t1
row2 ORIGINAL_NAME: No such row

--------------------------------------------------------------------
清理
--------------------------------------------------------------------
disconnect comm_weihan;
connect  comm_root,$OBMYSQL_MS0,root@recyclebin_tenant,,*NO-ONE*,$OBMYSQL_PORT;
connection comm_root;
set recyclebin = on;
use test;
drop database recyclebin_db1;
drop database recyclebin_db2;
drop database recyclebin_db3;
有6条记录，其中三个表对象，三个数据库对象
select count(*) from oceanbase.__all_recyclebin;
count(*)
6
use __recyclebin;
purge recyclebin;
set recyclebin=off;

--------------------------------------------------------------------
清理
--------------------------------------------------------------------
drop user weihan;
set recyclebin=off;
disconnect comm_root;
connect  obsys,$OBMYSQL_MS0,admin,$OBMYSQL_PWD,test,$OBMYSQL_PORT;
connection obsys;
drop tenant recyclebin_tenant force;
drop resource pool recyclebin_pool;
drop resource unit recyclebin_unit;
drop user weihan;
set recyclebin=off;
